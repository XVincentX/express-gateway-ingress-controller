apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: eg-ingress-controller
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: eg-ingress-controller
      name: eg-ingress-controller
    spec:
      containers:
        - name: eg-ingress-controller
          image: IMAGE_NAME
          imagePullPolicy: Never
          livenessProbe: &livenessProbe
              httpGet:
                host: localhost
                path: /users
                port: 9876
              initialDelaySeconds: 3
              periodSeconds: 3
          env:
            - name: DEBUG
              value: 'eg-ingress-controller'
        - name: express-gateway
          image: expressgateway/express-gateway
          livenessProbe: *livenessProbe
          env:
            - name: LOG_LEVEL
              value: debug
